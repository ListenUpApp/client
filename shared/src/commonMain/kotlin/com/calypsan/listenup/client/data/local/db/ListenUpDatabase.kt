package com.calypsan.listenup.client.data.local.db

import androidx.room.ConstructedBy
import androidx.room.Database
import androidx.room.RoomDatabase
import androidx.room.RoomDatabaseConstructor

/**
 * Room database for the ListenUp client application.
 *
 * Currently stores:
 * - User data (single user model)
 *
 * Schema is exported to shared/schemas/ for migration tracking.
 *
 * Note: @ConstructedBy is required for KMP Room to support non-Android platforms.
 * The constructor is generated by Room's KSP processor.
 */
@Database(
    entities = [
        UserEntity::class,
    ],
    version = 1,
    exportSchema = true
)
@ConstructedBy(ListenUpDatabaseConstructor::class)
abstract class ListenUpDatabase : RoomDatabase() {
    abstract fun userDao(): UserDao
}

/**
 * Room database constructor for KMP.
 * This class is referenced by @ConstructedBy but implementation is generated by Room KSP.
 */
@Suppress("NO_ACTUAL_FOR_EXPECT")
expect object ListenUpDatabaseConstructor : RoomDatabaseConstructor<ListenUpDatabase>
